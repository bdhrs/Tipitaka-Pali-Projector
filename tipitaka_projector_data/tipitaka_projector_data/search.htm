<!DOCTYPE html PUBLIC "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
  <title>TPP Search</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="TIPITAKA PROJECTOR ICON" href="images/favico.ico">
  <style>
    .tinysetting {
		text-align: center;
		font-size: small;
		color: red;
    }

    a:hover {
		color: #0000ff;
		text-decoration: none;
    }

    a:visited {
		color: #0000ff;
		text-decoration: none;
    }

    a:link {
		color: #0000ff;
		text-decoration: none;
    }
  </style>

	<script src="dictionary/jquery-3.3.1.min.js"></script>
	<script src="dictionary/z_search_pali_words.js"></script>
	<script src="dictionary/z_search_pali_no.js"></script>
	<script src="dictionary/z_tipitaka_Maps.js"></script>

	<script>
	    function Search_Suggest() {
	      var n = document.getElementById("Sr_Suggest").checked;
	      if (n) {
	        document.write.innerHTML  = localStorage.setItem('Sr_Suggest', 1);
	      } else {
	        document.write.innerHTML  = localStorage.setItem('Sr_Suggest', 0);
	        document.getElementById('out').innerHTML = '';
	      }
	    }

    	function Put(val) {
    		var key = document.getElementById('key').value.trim();
    		var pos = key.lastIndexOf(' ');
    		if (pos != -1) {
    			document.getElementById('key').value = key.substr(0, pos) + ' ' + val;
    		} else {
    			document.getElementById('key').value = val + ' ';
    		}
    		Start_Fuzzy();
    	}

		function replacei(str, sub, f) {
			let A = str.toLowerCase().split(sub.toLowerCase());
			let B = [];
			let x = 0;
			for (let i = 0; i < A.length; i++) {
				let n = A[i].length;
				B.push(str.substr(x, n));
				if (i < A.length-1)
					B.push(f(str.substr(x + n, sub.length)));
				x += n + sub.length;
			}
			return B.join('');
		}

		function toUniRegEx(input) {
			if(!input || input == '') return input;
			var nigahita = 'ṃ';
			var Nigahita = 'Ṃ';
			input = input.replace(/\"n/g, 'ṅ').replace(/aa/g, 'ā').replace(/ii/g, 'ī').replace(/uu/g, 'ū').replace(/\.t/g, 'ṭ').replace(/\.d/g, 'ḍ').replace(/\"nk/g, 'ṅk').replace(/\"ng/g, 'ṅg').replace(/\.n/g, 'ṇ').replace(/\.m/g, nigahita).replace(/\u1E41/g, nigahita).replace(/\~n/g, 'ñ').replace(/\.l/g, 'ḷ').replace(/AA/g, 'Ā').replace(/II/g, 'Ī').replace(/UU/g, 'Ū').replace(/\.T/g, 'Ṭ').replace(/\.D/g, 'Ḍ').replace(/\"N/g, 'Ṅ').replace(/\.N/g, 'Ṇ').replace(/\.M/g, Nigahita).replace(/\~N/g, 'Ñ').replace(/\.L/g, 'Ḷ');
			return input;
		}

		function Keyin() {
			var Suggest = localStorage.getItem('Sr_Suggest');

			if (Suggest == 1) {
				var key = toUniRegEx(document.getElementById('key').value);
				document.getElementById('key').value = key;

				key = key.trim().toLowerCase();

				key_ary = key.split(' ');
				key_ary_length = key_ary.length;

				var out = "";
				var key_notfound = "";
				for (key_i=0; key_i<key_ary_length; key_i++) {
					key = key_ary[key_i].trim();
					var len = key.length;
					if (1 <= len) {

						if ((key_i +1) ==  key_ary_length) {
							cx = 0;
							var out_tmp = "";
							for (var i in pws) {
								if (i.substring(0, len) == key) {
									cx = cx +1;
									out_tmp = out_tmp + '<a hef="javascript:void(0)" style="color:blue;" onClick="Put(\'' + i + '\');">' + i + '</a>' + " <span style='font-size:9pt;color:#800080;'>" + pws[i] + "</span>,&nbsp;&nbsp;&nbsp;";
									if (cx > 99) {
										out_tmp = out_tmp + " <span style='font-size:12pt;color:red;'>> 99...</span>";
										break;
									}
								}
							}
							if (out_tmp == "") {
								key_notfound = key_notfound + key + " ";
							} else {
								out = out + out_tmp;
							}
						} else {
							if (pws[key] == undefined) {
								key_notfound = key_notfound + key + ".... ";
							}
						}
					}
				}

				if (key_notfound != "") {
					document.getElementById('msg').innerHTML = 'Can\'t found this word  <span style="color:#ff0000;">' + key_notfound  + '</span>';
				} else {
					document.getElementById('msg').innerHTML = '';
				}
				document.getElementById('out').innerHTML = out;
			}
		}

		//**************************************************************************************
		function Start_Fuzzy() {
			var startDate = new Date();

			//var Chars = 'abcdefghijklmnopqrstuvwxyzāīūṅñṭḍṇḷṃABCDEFGHIJKLMNOPQRSTUVWXYZĀĪŪṄÑṬḌHṆḶṂ';

			document.getElementById('msg').innerHTML = "";
			document.getElementById('out').innerHTML = "";

			document.write.innerHTML = localStorage.setItem("Sr_type", 'F');

			var key = toUniRegEx(document.getElementById('key').value).trim().toLowerCase();
			if ( 1 < key.length) {
				document.write.innerHTML = localStorage.setItem("Sr_key", key);

				var i, x , y;

				var ary_key = [];
				var ary = key.split(' ');
				for (i in ary) {
					if (i.trim() != '') {
						//alert(i);
						ary_key[ary[i]] = ary_key[i];
					}
				}

				var max_length = 0;
				for (x=1; x<=3; x++) {
				  for (y=1; y<=8; y++) {
				    document.getElementById('Out' + y + x).innerHTML = '';
				    document.write.innerHTML  = localStorage.setItem('Sr_Out' + y + x, '');
				  }
				}

				for (i in pws_no) {
					document.write.innerHTML = localStorage.setItem('Sr_id' + i, '');
				}

				var total_file = 0;
				var total_hit = 0;

				for (x=1; x<=3; x++) {
					for (y=1; y<=8; y++) {
						var name1 = 'Nikaya' + y + x;
						var cx_file = 0;
						var cx_hit = 0;

						var pali = '';
						if (document.getElementById(name1).checked) {
							name1 = name1.substring(6);

							for (i in pws_no) {
								//alert(i.substring(0, 2) + "  =  " + name1);

								if (i.substring(0, 2) == name1) {
									var file = 'pali/' + i + 'a.js';

									var Sr_id = '';
									//alert(file);

									//**********
									// read file
									//**********
									var flag = '0'
									var rawFile = new XMLHttpRequest();
									rawFile.open("GET", file, false);
									rawFile.onreadystatechange = function () {
										if (rawFile.readyState === 4) {
											if (rawFile.status === 200 || rawFile.status == 0) {
												var data = rawFile.responseText;

												var ary_source = data.split( "\n" );
												data = data.toLowerCase();

												var ary = data.split( "\n" );

												for(index = 0; index < ary.length; index++) {
													var flag_ary = '1';
													//var sno = ary[index].substring(6);
													//sno = parseInt(sno);
													for (j in ary_key) {
														if (ary[index].indexOf(j) == -1) {
															flag_ary = '0';
															j = 999;
														}
														//} else {
														//	//var ary_tmp = ary[index].split(j);
														//	//var regex = new RegExp( '(' + j + ')', 'i' );
														//	//var ary_tmp = ary_source[index].split(regex);
														//
														//	tmp = replacei(ary_source[index], j, sub=> '<a href="' + i + '.htm?n=' + sno + '"  target=_blank style="background:yellow">' + j + "</a>");
														//
														//	ary_source[index] = tmp;
													}
													if (flag_ary == '1') {
														if (flag == '0') {
															flag = '1';
															cx_file = cx_file + 1;
															pali = pali + '<hr><b style="color:brown;">' + i + " " + T_Book[i] + "</b><br>";
														}

														cx_hit = cx_hit + 1;

														var tmp = ary_source[index];

														tmp = tmp.replace(/\*/g, '') + "<br><br>";
														tmp = tmp.replace(/\';/, '');
														var pos = tmp.indexOf("='");
														var tmp_id = tmp.substring(6, pos-1);
														tmp = tmp.substring(pos + 2);

														for (j in ary_key) {
															tmp = replacei(tmp, j, sub=> '<a href="' + i + '.htm?n=' + tmp_id + '" target=_blank style="background:yellow">' + j + "</a>");
														}

														pali = pali + tmp;
														Sr_id = Sr_id + tmp_id + ";";
													}
												}
											}
										}
									}
									rawFile.send(null);
									//*****************
									// end read file
									//*****************
									if (Sr_id != '') {
										//alert(i +" =  " + Sr_id);
										document.write.innerHTML = localStorage.setItem('Sr_id' + i, ';' + Sr_id);
									}
								}

							}
						}
						if (cx_file != 0) {
							max_length = max_length + pali.length;
							if (5200000<max_length) {
								document.getElementById('Out' + y + x).innerHTML = '<label onClick="Show_Detail(\'Out' + y + x + '\')" style="color:blue;">' + cx_file + " Files, " + cx_hit + " Paragraphs.</label>" + '<b style="color:red">&nbsp;Out of Memory</b>';
							} else {
								document.getElementById('Out' + y + x).innerHTML = '<label onClick="Show_Detail(\'Out' + y + x + '\')" style="color:blue;">' + cx_file + " Files, " + cx_hit + " Paragraphs.</label>";
							}
							total_file = total_file + cx_file;
							total_hit = total_hit + cx_hit;
							document.write.innerHTML  = localStorage.setItem('Sr_Out' + y + x, pali);
              //alert(pali.length);
						} else {
							document.getElementById('Out' + y + x).innerHTML = '0 Hits.' ;
						}
					}
				}
			}
			var endDate = new Date();
			var seconds = (endDate.getTime() - startDate.getTime())/1000;
			document.getElementById('msg').innerHTML = 'Fuzzy Search : ' + total_file +' Files, ' + total_hit + ' Paragraphs, ' + seconds + " Seconds";
		}

		//**************************************************************************************
		function Start_Exact() {
			var startDate = new Date();

			var Str_Pali = 'abcdefghijklmnopqrstuvwxyzāīūṅñṭḍṇḷṃABCDEFGHIJKLMNOPQRSTUVWXYZĀĪŪṄÑṬḌHṆḶṂ';

			document.getElementById('msg').innerHTML = "";
			document.getElementById('out').innerHTML = "";

			document.write.innerHTML = localStorage.setItem("Sr_type", 'E');

			var key = toUniRegEx(document.getElementById('key').value).trim().toLowerCase();
			if ( 1 < key.length) {
				document.write.innerHTML = localStorage.setItem("Sr_key", key);

				var i, x , y;

				var ary_key = [];
				var ary = key.split(' ');
				for (i in ary) {
					if (i.trim() != '') {
						//alert(i);
						ary_key[ary[i]] = ary_key[i];
					}
				}

				var max_length = 0;
				for (x=1; x<=3; x++) {
				  for (y=1; y<=8; y++) {
				    document.getElementById('Out' + y + x).innerHTML = '';
				    document.write.innerHTML  = localStorage.setItem('Sr_Out' + y + x, '');
				  }
				}

				for (i in pws_no) {
					document.write.innerHTML = localStorage.setItem('Sr_id' + i, '');
				}

				var total_file = 0;
				var total_hit = 0;

				for (x=1; x<=3; x++) {
					for (y=1; y<=8; y++) {
						var name1 = 'Nikaya' + y + x;
						var cx_file = 0;
						var cx_hit = 0;

						var pali = '';
						if (document.getElementById(name1).checked) {
							name1 = name1.substring(6);

							for (i in pws_no) {
								//alert(i.substring(0, 2) + "  =  " + name1);

								if (i.substring(0, 2) == name1) {
									var file = 'pali/' + i + 'a.js';

									var Sr_id = '';
									//alert(file);

									//**********
									// read file
									//**********
									var flag = '0'
									var rawFile = new XMLHttpRequest();
									rawFile.open("GET", file, false);
									rawFile.onreadystatechange = function () {
										if (rawFile.readyState === 4) {
											if (rawFile.status === 200 || rawFile.status == 0) {
												var data =' ' +  rawFile.responseText + ' ';

												var ary_source = data.split( "\n" );
												data = data.toLowerCase();

												var ary = data.split( "\n" );

												for(index = 0; index < ary.length; index++) {
													var flag_ary = '1';
													//var sno = ary[index].substring(6);
													//sno = parseInt(sno);

													for (j in ary_key) {
														var pos = ary[index].indexOf(j);
														var tmp = ary[index].substr(pos + j.length, 1);
														if ( pos == -1) {
															flag_ary = '0';
															j = 999;
														} else {
															var tmp = ary[index].substr(pos + j.length, 1);
															if (Str_Pali.indexOf(tmp) != -1) {
																flag_ary = '0';
																j = 999;
															} else {
																var tmp = ary[index].substr(pos-1, 1);
																if (Str_Pali.indexOf(tmp) != -1) {
																	flag_ary = '0';
																	j = 999;
																}
															}
														}
													}
													if (flag_ary == '1') {
														if (flag == '0') {
															flag = '1';
															cx_file = cx_file + 1;
															pali = pali + '<hr><b style="color:brown;">' + i + " " + T_Book[i] + "</b><br>";
														}

														cx_hit = cx_hit + 1;

														var tmp = ary_source[index];

														tmp = tmp.replace(/\*/g, '') + "<br><br>";
														tmp = tmp.replace(/\';/, '');
														var pos = tmp.indexOf("='");
														var tmp_id = tmp.substring(6, pos-1);
														tmp = tmp.substring(pos + 2);

														for (j in ary_key) {
															tmp = replacei(tmp, j, sub=> '<a href="' + i + '.htm?n=' + tmp_id + '" target=_blank style="background:yellow">' + j + "</a>");
														}

														pali = pali + tmp;
														Sr_id = Sr_id + tmp_id + ";";
													}
												}
											}
										}
									}
									rawFile.send(null);
									//*****************
									// end read file
									//*****************
									if (Sr_id != '') {
										//alert(i +" =  " + Sr_id);
										document.write.innerHTML = localStorage.setItem('Sr_id' + i, ';' + Sr_id);
									}
								}

							}
						}
						if (cx_file != 0) {
							max_length = max_length + pali.length;
							if (5200000<max_length) {
								document.getElementById('Out' + y + x).innerHTML = '<label onClick="Show_Detail(\'Out' + y + x + '\')" style="color:blue;">' + cx_file + " Files, " + cx_hit + " Paragraphs.</label>" + '<b style="color:red">&nbsp;Out of Memory</b>';
							} else {
								document.getElementById('Out' + y + x).innerHTML = '<label onClick="Show_Detail(\'Out' + y + x + '\')" style="color:blue;">' + cx_file + " Files, " + cx_hit + " Paragraphs.</label>";
							}
							total_file = total_file + cx_file;
							total_hit = total_hit + cx_hit;
							document.write.innerHTML  = localStorage.setItem('Sr_Out' + y + x, pali);
						} else {
							document.getElementById('Out' + y + x).innerHTML = '0 Hits.' ;
						}

					}
				}
			}
			var endDate = new Date();
			var seconds = (endDate.getTime() - startDate.getTime())/1000;
			document.getElementById('msg').innerHTML = 'Exact Search : ' + total_file +' Files, ' + total_hit + ' Paragraphs, ' + seconds + " Seconds";
		}

		//**************************************************************************************
		function Start_Prefix() {
			var startDate = new Date();

			var Str_Pali = 'abcdefghijklmnopqrstuvwxyzāīūṅñṭḍṇḷṃABCDEFGHIJKLMNOPQRSTUVWXYZĀĪŪṄÑṬḌHṆḶṂ';

			document.getElementById('msg').innerHTML = "";
			document.getElementById('out').innerHTML = "";

			document.write.innerHTML = localStorage.setItem("Sr_type", 'P');

			var key = toUniRegEx(document.getElementById('key').value).trim().toLowerCase();
			if ( 1 < key.length) {
				document.write.innerHTML = localStorage.setItem("Sr_key", key);

				var i, x , y;

				var ary_key = [];
				var ary = key.split(' ');
				for (i in ary) {
					if (i.trim() != '') {
						//alert(i);
						ary_key[ary[i]] = ary_key[i];
					}
				}

				var max_length = 0;
				for (x=1; x<=3; x++) {
				  for (y=1; y<=8; y++) {
				    document.getElementById('Out' + y + x).innerHTML = '';
				    document.write.innerHTML  = localStorage.setItem('Sr_Out' + y + x, '');
				  }
				}

				for (i in pws_no) {
					document.write.innerHTML = localStorage.setItem('Sr_id' + i, '');
				}

				var total_file = 0;
				var total_hit = 0;

				for (x=1; x<=3; x++) {
					for (y=1; y<=8; y++) {
						var name1 = 'Nikaya' + y + x;
						var cx_file = 0;
						var cx_hit = 0;

						var pali = '';
						if (document.getElementById(name1).checked) {
							name1 = name1.substring(6);

							for (i in pws_no) {
								//alert(i.substring(0, 2) + "  =  " + name1);

								if (i.substring(0, 2) == name1) {
									var file = 'pali/' + i + 'a.js';

									var Sr_id = '';
									//alert(file);

									//**********
									// read file
									//**********
									var flag = '0'
									var rawFile = new XMLHttpRequest();
									rawFile.open("GET", file, false);
									rawFile.onreadystatechange = function () {
										if (rawFile.readyState === 4) {
											if (rawFile.status === 200 || rawFile.status == 0) {
												var data =' ' +  rawFile.responseText + ' ';

												var ary_source = data.split( "\n" );
												data = data.toLowerCase();

												var ary = data.split( "\n" );

												for(index = 0; index < ary.length; index++) {
													var flag_ary = '1';
													//var sno = ary[index].substring(6);
													//sno = parseInt(sno);

													for (j in ary_key) {
														var pos = ary[index].indexOf(j);
														var tmp = ary[index].substr(pos + j.length, 1);
														if ( pos == -1) {
															flag_ary = '0';
															j = 999;
														} else {
															var tmp = ary[index].substr(pos + j.length, 1);
															if (Str_Pali.indexOf(tmp) < 0) {
																flag_ary = '0';
																j = 999;
															} else {
																var tmp = ary[index].substr(pos-1, 1);
																if (0 <= Str_Pali.indexOf(tmp)) {
																	flag_ary = '0';
																	j = 999;
																}
															}
														}
													}
													if (flag_ary == '1') {
														if (flag == '0') {
															flag = '1';
															cx_file = cx_file + 1;
															pali = pali + '<hr><b style="color:brown;">' + i + " " + T_Book[i] + "</b><br>";
														}

														cx_hit = cx_hit + 1;

														var tmp = ary_source[index];

														tmp = tmp.replace(/\*/g, '') + "<br><br>";
														tmp = tmp.replace(/\';/, '');
														var pos = tmp.indexOf("='");
														var tmp_id = tmp.substring(6, pos-1);
														tmp = tmp.substring(pos + 2);

														for (j in ary_key) {
															tmp = replacei(tmp, j, sub=> '<a href="' + i + '.htm?n=' + tmp_id + '" target=_blank style="background:yellow">' + j + "</a>");
														}

														pali = pali + tmp;
														Sr_id = Sr_id + tmp_id + ";";
													}
												}
											}
										}
									}
									rawFile.send(null);
									//*****************
									// end read file
									//*****************
									if (Sr_id != '') {
										//alert(i +" =  " + Sr_id);
										document.write.innerHTML = localStorage.setItem('Sr_id' + i, ';' + Sr_id);
									}
								}

							}
						}
						if (cx_file != 0) {
							max_length = max_length + pali.length;
							if (5200000<max_length) {
								document.getElementById('Out' + y + x).innerHTML = '<label onClick="Show_Detail(\'Out' + y + x + '\')" style="color:blue;">' + cx_file + " Files, " + cx_hit + " Paragraphs.</label>" + '<b style="color:red">&nbsp;Out of Memory</b>';
							} else {
								document.getElementById('Out' + y + x).innerHTML = '<label onClick="Show_Detail(\'Out' + y + x + '\')" style="color:blue;">' + cx_file + " Files, " + cx_hit + " Paragraphs.</label>";
							}
							total_file = total_file + cx_file;
							total_hit = total_hit + cx_hit;
							document.write.innerHTML  = localStorage.setItem('Sr_Out' + y + x, pali);
						} else {
							document.getElementById('Out' + y + x).innerHTML = '0 Hits.' ;
						}

					}
				}
			}
			var endDate = new Date();
			var seconds = (endDate.getTime() - startDate.getTime())/1000;
			document.getElementById('msg').innerHTML = 'Prefix Search : ' + total_file +' Files, ' + total_hit + ' Paragraphs, ' + seconds + " Seconds";
		}

		//**************************************************************************************
		function Start_Suffix() {
			var startDate = new Date();

			var Str_Pali = 'abcdefghijklmnopqrstuvwxyzāīūṅñṭḍṇḷṃABCDEFGHIJKLMNOPQRSTUVWXYZĀĪŪṄÑṬḌHṆḶṂ';

			document.getElementById('msg').innerHTML = "";
			document.getElementById('out').innerHTML = "";

			document.write.innerHTML = localStorage.setItem("Sr_type", 'S');

			var key = toUniRegEx(document.getElementById('key').value).trim().toLowerCase();

			if ( 1 < key.length) {
				document.write.innerHTML = localStorage.setItem("Sr_key", key);

				var i, x , y;

				var ary_key = [];
				var ary = key.split(' ');
				for (i in ary) {
					if (i.trim() != '') {
						//alert(i);
						ary_key[ary[i]] = ary_key[i];
					}
				}

				var max_length = 0;
				for (x=1; x<=3; x++) {
				  for (y=1; y<=8; y++) {
				    document.getElementById('Out' + y + x).innerHTML = '';
				    document.write.innerHTML  = localStorage.setItem('Sr_Out' + y + x, '');
				  }
				}

				for (i in pws_no) {
					document.write.innerHTML = localStorage.setItem('Sr_id' + i, '');
				}

				var total_file = 0;
				var total_hit = 0;

				for (x=1; x<=3; x++) {
					for (y=1; y<=8; y++) {
						var name1 = 'Nikaya' + y + x;
						var cx_file = 0;
						var cx_hit = 0;

						var pali = '';
						if (document.getElementById(name1).checked) {
							name1 = name1.substring(6);

							for (i in pws_no) {
								//alert(i.substring(0, 2) + "  =  " + name1);

								if (i.substring(0, 2) == name1) {
									var file = 'pali/' + i + 'a.js';

									var Sr_id = '';
									//alert(file);

									//**********
									// read file
									//**********
									var flag = '0'
									var rawFile = new XMLHttpRequest();
									rawFile.open("GET", file, false);
									rawFile.onreadystatechange = function () {
										if (rawFile.readyState === 4) {
											if (rawFile.status === 200 || rawFile.status == 0) {
												var data =' ' +  rawFile.responseText + ' ';

												var ary_source = data.split( "\n" );
												data = data.toLowerCase();

												var ary = data.split( "\n" );

												for(index = 0; index < ary.length; index++) {
													var flag_ary = '1';
													//var sno = ary[index].substring(6);
													//sno = parseInt(sno);

													for (j in ary_key) {
														//alert(j);
														var pos = ary[index].indexOf(j);
														var tmp = ary[index].substr(pos + j.length, 1);
														if ( pos == -1) {
															flag_ary = '0';
															j = 999;
														} else {
															var tmp = ary[index].substr(pos + j.length, 1);
															if (0 <= Str_Pali.indexOf(tmp)) {
																flag_ary = '0';
																j = 999;
															} else {
																var tmp = ary[index].substr(pos-1, 1);
																if (Str_Pali.indexOf(tmp) < 0) {
																	flag_ary = '0';
																	j = 999;
																}
															}
														}
													}
													if (flag_ary == '1') {
														if (flag == '0') {
															flag = '1';
															cx_file = cx_file + 1;
															pali = pali + '<hr><b style="color:brown;">' + i + " " + T_Book[i] + "</b><br>";
														}

														cx_hit = cx_hit + 1;

														var tmp = ary_source[index];

														tmp = tmp.replace(/\*/g, '') + "<br><br>";
														tmp = tmp.replace(/\';/, '');
														var pos = tmp.indexOf("='");
														var tmp_id = tmp.substring(6, pos-1);
														tmp = tmp.substring(pos + 2);

														for (j in ary_key) {
															tmp = replacei(tmp, j, sub=> '<a href="' + i + '.htm?n=' + tmp_id + '" target=_blank style="background:yellow">' + j + "</a>");
														}

														pali = pali + tmp;
														Sr_id = Sr_id + tmp_id + ";";
													}
												}
											}
										}
									}
									rawFile.send(null);
									//*****************
									// end read file
									//*****************
									if (Sr_id != '') {
										//alert(i +" =  " + Sr_id);
										document.write.innerHTML = localStorage.setItem('Sr_id' + i, ';' + Sr_id);
									}
								}

							}
						}
						if (cx_file != 0) {
							max_length = max_length + pali.length;
							if (5200000<max_length) {
								document.getElementById('Out' + y + x).innerHTML = '<label onClick="Show_Detail(\'Out' + y + x + '\')" style="color:blue;">' + cx_file + " Files, " + cx_hit + " Paragraphs.</label>" + '<b style="color:red">&nbsp;Out of Memory</b>';
							} else {
								document.getElementById('Out' + y + x).innerHTML = '<label onClick="Show_Detail(\'Out' + y + x + '\')" style="color:blue;">' + cx_file + " Files, " + cx_hit + " Paragraphs.</label>";
							}
							total_file = total_file + cx_file;
							total_hit = total_hit + cx_hit;
							document.write.innerHTML  = localStorage.setItem('Sr_Out' + y + x, pali);
						} else {
							document.getElementById('Out' + y + x).innerHTML = '0 Hits.' ;
						}

					}
				}
			}
			var endDate = new Date();
			var seconds = (endDate.getTime() - startDate.getTime())/1000;
			document.getElementById('msg').innerHTML = 'Suffix Search : ' + total_file +' Files, ' + total_hit + ' Paragraphs, ' + seconds + " Seconds";
		}

		//**************************************************************************************
		function Velthuis() {
			v1 = document.getElementById("velthuis").style.visibility;
			if (v1 == "") {
				document.getElementById("velthuis").style.visibility = "hidden";
			} else {
				document.getElementById("velthuis").style.visibility = "";
			}
		}

		function Clear() {
			document.write.innerHTML = localStorage.setItem("Sr_key", '');
			document.getElementById('key').value = '';
			document.getElementById('key').focus();
			for (x=1; x<=3; x++) {
				for (y=1; y<=8; y++) {
					var name1 = 'Out' + y + x;
					document.getElementById(name1).innerHTML = '';
				}
			}
		}

		function choosePali(val) {
			var chk, key, x , y;
			var v1 = val.substring(0, 1);
			var v2 = val.substring(1, 2);

			if (val == 'All') {
				chk = document.getElementById('All').checked;
				for (x=1; x<=3; x++) {
					for (y=1; y<=8; y++) {
						key = 'Nikaya' + y + x;
						document.getElementById(key).checked = chk;
					}
				}
			}
			if (v1 == 'x') {
				chk  = document.getElementById('MAT' + v2).checked;
				for (y=1; y<=8; y++) {
					key = 'Nikaya' + y + v2;
					document.getElementById(key).checked = chk;
				}
			}
			if (v2 == 'x') {
				chk  = document.getElementById('Nikaya' + v1).checked;
				for (x=1; x<=3; x++) {
					key = 'Nikaya' + v1 + x;
					document.getElementById(key).checked = chk;
				}
			}
		}

		function Show_Detail(id) {
			var html = document.getElementById(id).innerHTML;
			var pos1 = html.indexOf('<hr>');
			if (pos1 == -1) {
				document.getElementById(id).innerHTML = document.getElementById(id).innerHTML + localStorage.getItem('Sr_' + id);
			} else {
				document.getElementById(id).innerHTML = document.getElementById(id).innerHTML.substring(0, pos1);
			}
		}

		window.onload = function () {

      var n = localStorage.getItem("Sr_Suggest");
      if (n) {
        document.write.innerHTML = localStorage.setItem("Sr_Suggest", 1);
        document.getElementById("Sr_Suggest").checked = true;
      } else {
        document.write.innerHTML = localStorage.setItem("Sr_Suggest", 0);
        document.getElementById("Sr_Suggest").checked = '';
      }

			// init check
			for (x=1; x<=3; x++) {
				for (y=1; y<=8; y++) {
					var name1 = 'Nikaya' + y + x;
					document.getElementById(name1).checked = false;
				}
			}
			document.getElementById('Nikaya11').checked = true;
		}
  </script>

</head>

<body style="margin-top:0.0pt;margin-right:0in;margin-bottom:0in;margin-left:0in;margin-bottom:0pt;font-size:12.0pt;line-height:200%;font-family:Palatino, sans-serif;" bgcolor="#ffffc0">

	<table align="center" bgcolor="#ffffc0" border="0" width="100%" cellpadding="0" cellspacing="0">
	<tbody>
		<tr>
			<td width="2%"></td>
			<td align="right" valign="center" width="10%">
				<a href="index.htm">
					<img src="images/asoka.png">
				</a>
			</td>
			<td align="center" width="76%">
				<span style='line-height:120%;color:brown;font-size:15pt;'><b>Tipiṭaka Pāḷi Projector</b></span> - 20200202 (SG)

				<hr width="50%">
				Entry <a href="#Velthuis" onClick="Velthuis()" title="Show Velthuis">
				<span style="color:blue;">Velthuis Pali</span></a> word&nbsp;
				<input type="textbox" name="key" id="key" style="font-size:12pt;width:100%;max-width:280px;" onkeyup="Keyin()" value="">
				<input type="hidden" id="id1">
				<input type="hidden" id="id2">
        <br>

        <input style="color:red;" id="Sr_Suggest" type="checkbox" name="Sr_Suggest" onclick='Search_Suggest()' /></input>
        <label for="Sr_Suggest" onclick='Search_Suggest()'>Search Suggestion</label>

				<br>
				<input type="submit" onClick="Start_Fuzzy()" name="Submit" value="Fuzzy">&nbsp;&nbsp;
				<input type="submit" onClick="Start_Exact()" name="Submit" value="Exact">&nbsp;&nbsp;
				<input type="submit" onClick="Start_Prefix()" name="Submit" value="Prefix">&nbsp;&nbsp;
				<input type="submit" onClick="Start_Suffix()" name="Submit" value="Suffix"><br>

				&nbsp;|&nbsp;
				<lable style="color:blue;" onClick="Clear();">Clear</label><br>

				<span id="msg"></span>
			</td>
			<td align="center" width="10%">
				<span align="center" style="color:blue;"><a href="index.htm"><img src="images/home.png"> Home </a>
				<br></span>Seach Tipiṭaka
			</td>
			<td width="2%"></td>
		</tr>
		<tr>
			<td></td>
			<td colspan="3" id="suggest" onClick="document.getElementById('out').innerHTML= '';">
				<span id="out"></span>
			</td>
			<td></td>
		</tr>
	</tbody>
	</table>

	<table align="left" bgcolor="#ffffc0" border="0" cellspacing="1" cellpadding="3" width="100%">
	<tbody>
		<tr>
			<td width="2%">
			</td>
			<td align="center" width="15%" bgcolor="#bfb070">
				<input id="All" type="checkbox" name="All" onclick='choosePali("All")' /></input>
				<label for="All" onclick='choosePali("All")'>ALL</label>
			</td>
			<td width="27%" bgcolor="#dfd090">
				<input id="MAT1" type="checkbox" name="MAT1" onclick='choosePali("x1")' /></input>
				<label for="MAT1" onclick='choosePali("x1")'>1 Mūla</label>
			</td>
			<td width="27%" bgcolor="#dfd090">
				<input id="MAT2" type="checkbox" name="MAT2" onclick='choosePali("x2")' /></input>
				<label for="MAT2" onclick='choosePali("x2")'>2 Aṭṭhakathā</label>
			</td>
			<td width="27%" bgcolor="#dfd090">
				<input id="MAT3" type="checkbox" name="MAT3" onclick='choosePali("x3")' /></input>
				<label for="MAT3" onclick='choosePali("x3")'>3 Ṭīkā</label>
			</td>
			<td width="2%"></td>
		</tr>
		<tr>
			<td valign="top"></td>
			<td bgcolor="#dfd090" valign="top">
				<input id="Nikaya1" type="checkbox" name="Nikaya1" onclick='choosePali("1x")' /></input>
				<label for="Nikaya1" onclick='choosePali("1x")'>●1 Vinayapiṭaka</label>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x11">
				<input id="Nikaya11" type="checkbox" name="Nikaya11" onclick='choosePali("11")' /></input>
				<span id="Out11"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x12">
				<input id="Nikaya12" type="checkbox" name="Nikaya12" onclick='choosePali("12")' /></input>
				<span id="Out12"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x13">
				<input id="Nikaya13" type="checkbox" name="Nikaya13" onclick='choosePali("13")' /></input>
				<span id="Out13"></span>
			</td>
		</tr>
		<tr>
			<td valign="top"></td>
			<td bgcolor="#dfd090" valign="top">
				<input id="Nikaya2" type="checkbox" name="Nikaya2" onclick='choosePali("2x")' /></input>
				<label for="Nikaya2" onclick='choosePali("2x")'>●2 Dīghanikāya</label>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x21">
				<input id="Nikaya21" type="checkbox" name="Nikaya21" onclick='choosePali("21")' /></input>
				<span id="Out21"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x22">
				<input id="Nikaya22" type="checkbox" name="Nikaya22" onclick='choosePali("22")' /></input>
				<span id="Out22"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x23">
				<input id="Nikaya23" type="checkbox" name="Nikaya23" onclick='choosePali("23")' /></input>
				<span id="Out23"></span>
			</td>
		</tr>
		<tr>
			<td valign="top"></td>
			<td bgcolor="#dfd090" valign="top">
				<input id="Nikaya3" type="checkbox" name="Nikaya3" onclick='choosePali("3x")' /></input>
				<label for="Nikaya3" onclick='choosePali("3x")'>●3 Majjhimanikāya</label>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x31">
				<input id="Nikaya31" type="checkbox" name="Nikaya31" onclick='choosePali("31")' /></input>
				<span id="Out31"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x32">
				<input id="Nikaya32" type="checkbox" name="Nikaya32" onclick='choosePali("32")' /></input>
				<span id="Out32"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x33">
				<input id="Nikaya33" type="checkbox" name="Nikaya33" onclick='choosePali("33")' /></input>
				<span id="Out33"></span>
			</td>
		</tr>
		<tr>
			<td valign="top"></td>
			<td bgcolor="#dfd090" valign="top">
				<input id="Nikaya4" type="checkbox" name="Nikaya4" onclick='choosePali("4x")' /></input>
				<label for="Nikaya4" onclick='choosePali("4x")'>●4 Saṃyuttanikāya</label>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x41">
				<input id="Nikaya41" type="checkbox" name="Nikaya41" onclick='choosePali("41")' /></input>
				<span id="Out41"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x42">
				<input id="Nikaya42" type="checkbox" name="Nikaya42" onclick='choosePali("42")' /></input>
				<span id="Out42"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x43">
				<input id="Nikaya43" type="checkbox" name="Nikaya43" onclick='choosePali("43")' /></input>
				<span id="Out43"></span>
			</td>
		</tr>
		<tr>
			<td valign="top"></td>
			<td bgcolor="#dfd090" valign="top">
				<input id="Nikaya5" type="checkbox" name="Nikaya5" onclick='choosePali("5x")' /></input>
				<label for="Nikaya5" onclick='choosePali("5x")'>●5 Aṅguttaranikāya</label>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x51">
				<input id="Nikaya51" type="checkbox" name="Nikaya51" onclick='choosePali("51")' /></input>
				<span id="Out51"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x52">
				<input id="Nikaya52" type="checkbox" name="Nikaya52" onclick='choosePali("52")' /></input>
				<span id="Out52"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x53">
				<input id="Nikaya53" type="checkbox" name="Nikaya53" onclick='choosePali("53")' /></input>
				<span id="Out53"></span>
			</td>
		</tr>
		<tr>
			<td valign="top"></td>
			<td bgcolor="#dfd090" valign="top">
				<input id="Nikaya6" type="checkbox" name="Nikaya6" onclick='choosePali("6x")' /></input>
				<label for="Nikaya6" onclick='choosePali("6x")'>●6 Khuddakanikāya</label>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x61">
				<input id="Nikaya61" type="checkbox" name="Nikaya61" onclick='choosePali("61")' /></input>
				<span id="Out61"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x62">
				<input id="Nikaya62" type="checkbox" name="Nikaya62" onclick='choosePali("62")' /></input>
				<span id="Out62"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x63">
				<input id="Nikaya63" type="checkbox" name="Nikaya63" onclick='choosePali("63")' /></input>
				<span id="Out63"></span>
			</td>
		</tr>
		<tr>
			<td valign="top"></td>
			<td bgcolor="#dfd090" valign="top">
				<input id="Nikaya7" type="checkbox" name="Nikaya7" onclick='choosePali("7x")' /></input>
				<label for="Nikaya7" onclick='choosePali("7x")'>●7 Abhidhammapiṭaka</label>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x71">
				<input id="Nikaya71" type="checkbox" name="Nikaya71" onclick='choosePali("71")' /></input>
				<span id="Out71"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x72">
				<input id="Nikaya72" type="checkbox" name="Nikaya72" onclick='choosePali("72")' /></input>
				<span id="Out72"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x73">
				<input id="Nikaya73" type="checkbox" name="Nikaya73" onclick='choosePali("73")' /></input>
				<span id="Out73"></span>
			</td>
		</tr>
		<tr>
			<td valign="top"></td>
			<td bgcolor="#dfd090" valign="top">
				<input id="Nikaya8" type="checkbox" name="Nikaya8" onclick='choosePali("8x")' /></input>
				<label for="Nikaya8" onclick='choosePali("8x")'>●8 Añña</label>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x81">
				<input id="Nikaya81" type="checkbox" name="Nikaya81" onclick='choosePali("81")' style="visibility:hidden;" /></input>
				<span id="Out81" style="visibility:hidden;"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x82">
				<input id="Nikaya82" type="checkbox" name="Nikaya82" onclick='choosePali("82")' /></input>
				<span id="Out82"></span>
			</td>
			<td bgcolor="#ffe0b0" valign="top" id="x83">
				<input id="Nikaya83" type="checkbox" name="Nikaya83" onclick='choosePali("83")' /></input>
				<span id="Out83"></span>
			</td>
		</tr>
	</tbody>
	</table>

	<div id="velthuis" align="center" style="visibility:hidden;">
		<center>
		<table width="90%">
			<tr>
				<td align="left">
					<b>The Velthuis Scheme</b>
				</td>
				<td align="right">
				</td>
			</tr>
			<tr>
				<td class="small">
					<i>(taken from <a class="small" href="http://www.tipitaka.net/pali/paliload.php?page=velthuis" style="color:green">http://www.tipitaka.net/pali/paliload.php?page=velthuis</a>)</i>
				</td>
			</tr>
		</table>
		<table width="90%" border="1" bordercolor="#FF9900" cellspacing="0" cellpadding="3"onClick="Velthuis();">
			<tr>
				<td rowspan="15" valign="top" >
					<p><b>Double the vowels, Punctuate the consonants</b></p>
					<p>This scheme was originally developed in 1991 by Frans Velthuis for use with
					 his <i>devnag</i> Devanagari font, designed for the TeX typesetting system. Pali
					 and Sanskrit scholars have since adopted it as a standard technique in Internet
					 correspondence.</p>
					<p>In the Velthuis scheme, two basic rules are observed:</p>
					<p>1. Long vowels (those with a macron (bar) above them) are doubled: aa, ii, uu.</p>
					<p>2. For consonants, the diacritic mark precedes the letter it affects. Thus,
					 the retroflex (cerebral) consonants (those with a dot underneath) are: .r .t .th
					 .d .dh .n .m .s .l. The guttural nasals (m  with a dot below or n with a dot above) are
					 represented by "m and "n. The palatal nasal (n with a tilde) is ~n.</p>
					<p>The scheme is precise, although it takes a while to get used to. Here a table of the
					 affected Pali letters in both unicode form and Velthuis scheme.</p>
				</td>
				<td bgcolor="#F0F000"><b>Unicode</b></td>
				<td bgcolor="#F0F000"><b>Velthuis</b></td>
			</tr>

			<tr>
				<td bgcolor="#F0F000" colspan="2" align="center">(Long vowels)</td>
			</tr>

			<tr>
				<td bgcolor="#F0F000" align="center">ā</td>
				<td bgcolor="#F0F000" align="center">aa</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ī</td>
				<td bgcolor="#F0F000" align="center">ii</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ū</td>
				<td bgcolor="#F0F000" align="center">uu</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" colspan="2" align="center">(Consonants)</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ṅ</td>
				<td bgcolor="#F0F000" align="center">"n</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ñ</td>
				<td bgcolor="#F0F000" align="center">~n</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ṭ</td>
				<td bgcolor="#F0F000" align="center">.t</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ṭh</td>
				<td bgcolor="#F0F000" align="center">.th</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ḍ</td>
				<td bgcolor="#F0F000" align="center">.d</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ḍh</td>
				<td bgcolor="#F0F000" align="center">.dh</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ṇ</td>
				<td bgcolor="#F0F000" align="center">.n</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ḷ</td>
				<td bgcolor="#F0F000" align="center">.l</td>
			</tr>
			<tr>
				<td bgcolor="#F0F000" align="center">ṃ</td>
				<td bgcolor="#F0F000" align="center">.m</td>
			</tr>
		</table>
	</div>

	<a name="Velthuis"></a>

<br><br>
</body></html>
